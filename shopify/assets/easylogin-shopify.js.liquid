$(document).ready(function() {
    function getRequestArgs(name){
      if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search))
        return decodeURIComponent(name[1]);
    } 
    
    var action = getRequestArgs('a');
    var email = getRequestArgs('k');
    var password = getRequestArgs('s');
    
    if (action === 'l') {
      $('input[name="customer[email]"]').val(email);
      $('input[name="customer[password]"]').val(password);
      $('input[type=submit][value="{{ 'customer.login.sign_in' | t }}"]').click();
    } else if (action === 'r') {
      var firstName = getRequestArgs('f');
      var lastName = getRequestArgs('l');
      
      $('input[name="customer[first_name]"]').val(firstName);
      $('input[name="customer[last_name]"]').val(lastName);
      $('input[name="customer[email]"]').val(email);
      $('input[name="customer[password]"]').val(password);
      $('input[type=submit][value="{{ 'customer.register.submit' | t }}"]').click();
    }
  
    $('input[type=submit][value="{{ 'customer.reset_password.submit' | t }}"]').on('click', function() {   
      console.log("reset password clicked");
      var password = $('input[name="customer[password]"]').val();
      var passwordConfirmation = $('input[name="customer[password_confirmation]"]').val();
  
      if (password === passwordConfirmation) {
  
      }
      console.log("id:" + $('input[type=hidden][name=id]').val());
      console.log("password:" + password);
    })
  });